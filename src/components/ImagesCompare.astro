---
import getImageVampire from "../helpers/getImageVampire";
import insertImageRegister from "../helpers/insertImageRegister";
import { model } from "../libs/gemini";

await new Promise((resolve) => setTimeout(resolve, 5000));

const { id } = Astro.params as { id: string };
const username = Astro.url.searchParams.get("username") as string;

console.log(id, username);

const url = getImageVampire(id);

const geminiResponse = await model.generateContent([
  "Hola, crea una historia de un vampiro",
]);

await insertImageRegister(id, username, "Pending to generate");

console.log(geminiResponse);
---

<div class="flex gap-4 justify-center items-center">
  <img
    class="h-[300px] w-max aspect-auto rounded-md"
    src={url.transformedUrl}
    alt="Your image"
  />
  <img
    class="h-[300px] w-max aspect-auto rounded-md"
    src={url.originalUrl}
    alt="Your image"
  />
</div>
